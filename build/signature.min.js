/*! signature 2013-04-19 */
(function(){var n=function(){var n=function(n){return n.replace(/(?:(?:^|\n)\s+|\s+(?:$|\n))/g,"").replace(/\s+/g," ")},r=function(n,t){var r,a=[];for(r in n){var o=n[r];a.push(e(r,o,t))}return a},e=function(r,e,a){var o,i,u=r.split(","),d=[],f=!0;for(d.data=[],d.startingNodes=[],d.responder=e,i=0;u.length>i;i++){if(o=n(u[i]),""===o)return d.hasEmptyPath=!0,d;d.data[i]={},o.length>=3&&"["===o.charAt(0)&&"]"===o.charAt(o.length-1)?(o=o.substring(1,o.length-1),d.data[i].optional=!0):d.data[i].optional=!1,"!"===o.charAt(0)?(o=o.substring(1,o.length),d.data[i].negator=!0):d.data[i].negator=!1,d.data[i].index=i,d.data[i].matcher=t.findByName(o,a),d.data[i].linksTo=[],d.data[i].isStartingNode=f,f&&d.startingNodes.push(d.data[i]),f&&d.data[i].optional||(f=!1)}for(i=0;d.data.length-1>i;i++){for(var s=!0,c=i+1;d.data.length>c;c++)if(d.data[i].linksTo.push(d.data[c]),!d.data[c].optional){s=!1;break}d.data[i].isEndNode=s}return d.data[i].isEndNode=!0,d.data[0].isEndNode&&d.data[0].isStartingNode&&d.data[0].optional&&(d.hasEmptyPath=!0),d};return r}();(function(){var n=function(){};return n})();var t=function(){var n=function(n,r){var e;return"object"==typeof r&&(e=r[n]),e||(e=t[n]),e},t={"true":function(n){return n===!0},"false":function(n){return n===!1},truthy:function(n){return n?!0:!1},falsy:function(n){return n?!1:!0},object:function(n){return"object"==typeof n},number:function(n){return"number"==typeof n},string:function(n){return"string"==typeof n},any:function(n){return n!==void 0&&null!==n},"function":function(n){return"function"==typeof n}};return t["*"]=t.any,t.falsey=t.falsy,{findByName:n}}(),r=function(){var n,t,r,e,a,o,i=[],u=function(n){var a=n.matcher(e[t]);return n.negator&&(a=!a),a?(r[n.index]||(r[n.index]=0),d(n)):f(n)},d=function(a){i[a.index]=e[t];var o=r[a.index],d=a.linksTo[o];return t++,n.push(d),a.isEndNode&&t===e.length?i:d?(r[d.index]=0,u(d)):t===e.length?i:!1},f=function(e){n.pop(),i[e.index]=void 0;var d=n[n.length-1];if(!d){o++;var s=a[o];return void 0!==s?u(s):!1}r[d.index]+=1;var c=d.linksTo[r[d.index]];return c?(r[c.index]=0,n.push(c),u(c)):(t--,f(d))},s=function(d,f){return e=f,t=0,r=[],i=[],a=d.startingNodes,o=0,n=[a[0]],0===f.length&&d.hasEmptyPath?[]:u(a[0])};return s}(),e=this,a=function(t,e){var a=n(t,e),o=function(){var n,t,e,o;for(o=0;a.length>o;o++)if(e=a[o],t=r(e,arguments),t!==!1)return n=e.responder,n.apply(this,t);return void 0};return o};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=a),exports.signature=a):e.signature=a})();