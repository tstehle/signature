/*! signature 2013-04-16 */
(function(){var n={number:function(n){return"number"==typeof n},string:function(n){return"string"==typeof n},any:function(n){return n!==void 0&&null!==n},"function":function(n){return"function"==typeof n}};n["*"]=n.any;var e,o=function(){var n,e,o,r,t,i=[],s=function(n){return r[n.index]||(r[n.index]=0),n.matcher(t[e])?(console.log("doParse of node "+n.index+" compared to argument "+t[e]+" --- PASS"),u(n)):(console.log("doParse of node "+n.index+" compared to argument "+t[e]+" --- FAIL"),a(n))},u=function(o){i[o.index]=t[e];var u=r[o.index],a=o.linksTo[u];return e++,n.push(a),o.isEndNode&&e===t.length?i:a?(r[a.index]=0,s(a)):e===t.length?i:!1},a=function(o){n.pop(),i[o.index]=void 0;var t=n[n.length-1];if(console.log("*/*/*/ BACKTRACKING TO PREVIOUS NODE:"),console.log(t),!t)return!1;r[t.index]+=1;var u=t.linksTo[r[t.index]];return u?(r[u.index]=0,n.push(u),console.log("*/*/*/ FINDING NEXT NODE:"),console.log(u),s(u)):(e--,a(t))};return{parse:function(u,a){return o=u,t=a,e=0,n=[o[0]],r=[],i=[],s(o[0])}}}(),r=function(){var e,r,t="0.0.0",i=function(){},s=o.parse,u=function(n){var e,o,r=n.split(","),t=[],i=!0;for(t.startingNodes=[],o=0;r.length>o;o++)e=c(r[o]),t[o]={},e.length>=3&&"["===e.charAt(0)&&"]"===e.charAt(e.length-1)?(e=e.substring(1,e.length-1),t[o].optional=!0):t[o].optional=!1,t[o].index=o,t[o].matcher=g(e),t[o].linksTo=[],t[o].isStartingNode=i,i&&t.startingNodes.push(t[o]),i&&t[o].optional||(i=!1);for(o=0;t.length-1>o;o++){for(var s=!0,u=o+1;t.length>u;u++)if(t[o].linksTo.push(t[u]),!t[u].optional){s=!1;break}t[o].isEndNode=s}return t[o].isEndNode=!0,console.log("$$$$$ PARSED EXPRESSION $$$$$"),console.log(t),t},a=function(){var n,o={};for(n in e.responders)o[n]=u(n);return o},c=function(n){return n.replace(/(?:(?:^|\n)\s+|\s+(?:$|\n))/g,"").replace(/\s+/g," ")},l=function(n){var o,r,t;for(t in e.responders){if(o=e.responders[t],r=d(n,t),"object"==typeof r){console.log(r);break}r=[],o=i}return{responder:o,args:r}},f=n,d=function(n,e){var o=r[e];return s(o,n)},g=function(n){var o;return"object"==typeof e.matchers&&(o=e.matchers[n]),o||(o=f[n]),o};return{version:t,createHandler:function(n){return e=n,r=a(),function(){console.log(arguments);var n=l(arguments);return n.responder.apply(this,n.args)}}}},t=this;e="undefined"!=typeof exports?exports:t.sig={},e.signature=r})();