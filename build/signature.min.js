/*! signature 2013-04-20 */
(function(){var n=function(){var n=function(n){return n.replace(/(?:(?:^|\n)\s+|\s+(?:$|\n))/g,"").replace(/\s+/g," ")},a=function(t,a){var r,i=[];for(r in t){var o=t[r];"*"!==n(r)&&i.push(e(r,o,a))}return i},e=function(a,e,r){var i,o,u=a.split(","),f=[],d=!0;for(f.data=[],f.data[0]={linksTo:[],index:-1},f.responder=e,o=1;u.length+1>o;o++){if(i=n(u[o-1]),""===i)return f.hasEmptyPath=!0,f;f.data[o]={},i.length>=3&&"["===i.charAt(0)&&"]"===i.charAt(i.length-1)?(i=i.substring(1,i.length-1),f.data[o].optional=!0):f.data[o].optional=!1,"!"===i.charAt(0)?(i=i.substring(1,i.length),f.data[o].negator=!0):f.data[o].negator=!1,"..."===i.slice(i.length-3,i.length)?(i=i.substring(0,i.length-3),f.data[o].infinite=!0):f.data[o].infinite=!1,f.data[o].index=o-1,f.data[o].matcher=t.findByName(i,r,f.data[o].negator),f.data[o].linksTo=[],f.data[o].isStartingNode=d,f.data[o].infinite&&f.data[o].linksTo.push(f.data[o]),d&&f.data[o].optional||(d=!1)}for(o=0;f.data.length-1>o;o++){for(var s=!0,l=o+1;f.data.length>l;l++)if(f.data[o].linksTo.push(f.data[l]),!f.data[l].optional){s=!1;break}f.data[o].isEndNode=s}return f.data[o].isEndNode=!0,f.data[1].isEndNode&&f.data[1].isStartingNode&&f.data[1].optional&&(f.hasEmptyPath=!0),f};return a}(),t=function(){var n=function(n,a,e){var r;return"object"==typeof a&&(r=a[n]),r||(r=t[n]),e?function(n){return!r(n)}:r},t={"true":function(n){return n===!0},"false":function(n){return n===!1},undefined:function(n){return void 0===n},NaN:function(n){return isNaN(n)},truthy:function(n){return n?!0:!1},falsy:function(n){return n?!1:!0},object:function(n){return"object"==typeof n},number:function(n){return"number"==typeof n},string:function(n){return"string"==typeof n},any:function(n){return n!==void 0&&null!==n},"function":function(n){return"function"==typeof n},"*":function(){return!0}};return t["?"]=t.any,t.falsey=t.falsy,{findByName:n}}(),a=function(){var n=[].slice,t=function(a,e,r,i){if(-1===r||a.matcher(e[r])){var o,u;if(e.length===r+1)return a.isEndNode?(o=[],o[a.index]=a.infinite?n.call(e,r-i,r+1):e[r],o):!1;for(u=0;a.linksTo.length>u;u++){var f=a.linksTo[u],d=0;if(a===f&&(d=i+1),o=t(f,e,r+1,d))return-1!==r&&(a.infinite?o[a.index]||(o[a.index]=n.call(e,r-i,r+1)):o[a.index]=e[r]),o}return!1}return!1},a=function(n,a){return 0===a.length&&n.hasEmptyPath?[]:t(n.data[0],a,-1)};return a}(),e=this,r=function(t,e){var r=n(t,e),i=t["*"],o=function(){var n,t,e,o;for(o=0;r.length>o;o++)if(e=r[o],t=a(e,arguments),t!==!1)return n=e.responder,n.apply(this,t);return"function"==typeof i?i.apply(this,arguments):void 0};return o};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=r),exports.signature=r):e.signature=r})();