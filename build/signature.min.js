/*! signature 2013-04-20 */
(function(){var t=function(){var t=function(t){return t.replace(/(?:(?:^|\n)\s+|\s+(?:$|\n))/g,"").replace(/\s+/g," ")},r=function(t,n){var r,e=[];for(r in t){var o=t[r];e.push(a(r,o,n))}return e},a=function(r,a,e){var o,i,u=r.split(","),d=[],f=!0;for(d.data=[],d.data[0]={linksTo:[],index:-1},d.responder=a,i=1;u.length+1>i;i++){if(o=t(u[i-1]),""===o)return d.hasEmptyPath=!0,d;d.data[i]={},o.length>=3&&"["===o.charAt(0)&&"]"===o.charAt(o.length-1)?(o=o.substring(1,o.length-1),d.data[i].optional=!0):d.data[i].optional=!1,"!"===o.charAt(0)?(o=o.substring(1,o.length),d.data[i].negator=!0):d.data[i].negator=!1,d.data[i].index=i-1,d.data[i].matcher=n.findByName(o,e),d.data[i].linksTo=[],d.data[i].isStartingNode=f,f&&d.data[0].linksTo.push(d.data[i]),f&&d.data[i].optional||(f=!1)}for(i=0;d.data.length-1>i;i++){for(var s=!0,c=i+1;d.data.length>c;c++)if(d.data[i].linksTo.push(d.data[c]),!d.data[c].optional){s=!1;break}d.data[i].isEndNode=s}return d.data[i].isEndNode=!0,d.data[1].isEndNode&&d.data[1].isStartingNode&&d.data[1].optional&&(d.hasEmptyPath=!0),d};return r}();(function(){var t=function(){};return t})();var n=function(){var t=function(t,r){var a;return"object"==typeof r&&(a=r[t]),a||(a=n[t]),a},n={"true":function(t){return t===!0},"false":function(t){return t===!1},truthy:function(t){return t?!0:!1},falsy:function(t){return t?!1:!0},object:function(t){return"object"==typeof t},number:function(t){return"number"==typeof t},string:function(t){return"string"==typeof t},any:function(t){return t!==void 0&&null!==t},"function":function(t){return"function"==typeof t}};return n["*"]=n.any,n.falsey=n.falsy,{findByName:t}}(),r=function(){var t=function(n,r,a){var e;if(-1!==a&&(e=n.matcher(r[a]),n.negator&&(e=!e)),-1===a||e){var o;if(r.length===a+1)return n.isEndNode?(o=[],o[n.index]=r[a],o):!1;for(var i=0;n.linksTo.length>i;i++){var u=n.linksTo[i];if(o=t(u,r,a+1))return-1!==a&&(o[n.index]=r[a]),o}return!1}return!1},n=function(n,r){return 0===r.length&&n.hasEmptyPath?[]:t(n.data[0],r,-1)};return n}(),a=this,e=function(n,a){var e=t(n,a),o=function(){var t,n,a,o;for(o=0;e.length>o;o++)if(a=e[o],n=r(a,arguments),n!==!1)return t=a.responder,t.apply(this,n);return void 0};return o};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=e),exports.signature=e):a.signature=e})();