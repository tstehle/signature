/*! signature 2013-04-17 */
(function(){var n,r=function(){var n=function(n){return n.replace(/(?:(?:^|\n)\s+|\s+(?:$|\n))/g,"").replace(/\s+/g," ")},r=function(n,r){var t,o={};for(t in n)o[t]=e(t,r);return o},e=function(r,e){var o,i,u=r.split(","),a=[],s=!0;for(a.startingNodes=[],i=0;u.length>i;i++)o=n(u[i]),a[i]={},o.length>=3&&"["===o.charAt(0)&&"]"===o.charAt(o.length-1)?(o=o.substring(1,o.length-1),a[i].optional=!0):a[i].optional=!1,"!"===o.charAt(0)?(o=o.substring(1,o.length),a[i].negator=!0):a[i].negator=!1,a[i].index=i,a[i].matcher=t.findByName(o,e),a[i].linksTo=[],a[i].isStartingNode=s,s&&a.startingNodes.push(a[i]),s&&a[i].optional||(s=!1);for(i=0;a.length-1>i;i++){for(var f=!0,c=i+1;a.length>c;c++)if(a[i].linksTo.push(a[c]),!a[c].optional){f=!1;break}a[i].isEndNode=f}return a[i].isEndNode=!0,console.log("$$$$$ PARSED EXPRESSION IS NOW A TREE $$$$$"),console.log(a),a};return r}(),t=function(){var n=function(n,t){var e;return"object"==typeof t&&(e=t[n]),e||(e=r[n]),e},r={object:function(n){return"object"==typeof n},number:function(n){return"number"==typeof n},string:function(n){return"string"==typeof n},any:function(n){return n!==void 0&&null!==n},"function":function(n){return"function"==typeof n}};return r["*"]=r.any,{findByName:n}}(),e=function(){var n,r,t,e,o,i,u,a=[],s=function(n){e[n.index]||(e[n.index]=0);var t=n.matcher(o[r]);return n.negator&&(t=!t),t?f(n):c(n)},f=function(t){a[t.index]=o[r];var i=e[t.index],u=t.linksTo[i];return r++,n.push(u),t.isEndNode&&r===o.length?a:u?(e[u.index]=0,s(u)):r===o.length?a:!1},c=function(t){n.pop(),a[t.index]=void 0;var o=n[n.length-1];if(!o){u++;var f=i[u];return void 0!==f?s(f):!1}e[o.index]+=1;var d=o.linksTo[e[o.index]];return d?(e[d.index]=0,n.push(d),s(d)):(r--,c(o))},d=function(f,c){return t=f,o=c,r=0,e=[],a=[],i=t.startingNodes,u=0,n=[i[0]],s(i[0])};return d}(),o=function(){},i=function(n,r,t){var e,i,a;for(a in r){if(e=r[a],i=u(n,a,t),"object"==typeof i)break;i=[],e=o}return{responder:e,args:i}},u=function(n,r,t){var o=t[r];return e(o,n)},a=function(n){var t=r(n.responders,n.matchers),e=function(){var r=i(arguments,n.responders,t);return r.responder.apply(this,r.args)};return e},s=this;n="undefined"!=typeof exports?exports:s.signature={},n.createHandler=a})();