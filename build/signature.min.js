/*! signature 2013-04-15 */
var treeParser=function(){var n,e,r,o,t,i=[],s=function(n){return o[n.index]||(o[n.index]=0),n.matcher(t[e])?(console.log("doParse of node "+n.index+" compared to argument "+t[e]+" --- PASS"),u(n)):(console.log("doParse of node "+n.index+" compared to argument "+t[e]+" --- FAIL"),a(n))},u=function(r){i[r.index]=t[e];var u=o[r.index],a=r.linksTo[u];return e++,n.push(a),r.isEndNode&&e===t.length?i:a?(o[a.index]=0,s(a)):e===t.length?i:!1},a=function(r){n.pop(),i[r.index]=void 0;var t=n[n.length-1];if(console.log("*/*/*/ BACKTRACKING TO PREVIOUS NODE:"),console.log(t),!t)return!1;o[t.index]+=1;var u=t.linksTo[o[t.index]];return u?(o[u.index]=0,n.push(u),console.log("*/*/*/ FINDING NEXT NODE:"),console.log(u),s(u)):(e--,a(t))};return{parse:function(u,a){return r=u,t=a,e=0,n=[r[0]],o=[],i=[],s(r[0])}}}(),signature=function(){var n,e,r="0.0.0",o=function(){},t=treeParser.parse,i=function(n){var e,r,o=n.split(","),t=[],i=!0;for(t.startingNodes=[],r=0;o.length>r;r++)e=u(o[r]),t[r]={},e.length>=3&&"["===e.charAt(0)&&"]"===e.charAt(e.length-1)?(e=e.substring(1,e.length-1),t[r].optional=!0):t[r].optional=!1,t[r].index=r,t[r].matcher=g(e),t[r].linksTo=[],t[r].isStartingNode=i,i&&t.startingNodes.push(t[r]),i&&t[r].optional||(i=!1);for(r=0;t.length-1>r;r++){for(var s=!0,a=r+1;t.length>a;a++)if(t[r].linksTo.push(t[a]),!t[a].optional){s=!1;break}t[r].isEndNode=s}return t[r].isEndNode=!0,console.log("$$$$$ PARSED EXPRESSION $$$$$"),console.log(t),t},s=function(){var e,r={};for(e in n.responders)r[e]=i(e);return r},u=function(n){return n.replace(/(?:(?:^|\n)\s+|\s+(?:$|\n))/g,"").replace(/\s+/g," ")},a=function(e){var r,t,i;for(i in n.responders){if(r=n.responders[i],t=l(e,i),"object"==typeof t){console.log(t);break}t=[],r=o}return{responder:r,args:t}},c={number:function(n){return"number"==typeof n},string:function(n){return"string"==typeof n},any:function(n){return n!==void 0&&null!==n},"function":function(n){return"function"==typeof n}};c["*"]=c.any;var l=function(n,r){var o=e[r];return t(o,n)},g=function(e){var r;return"object"==typeof n.matchers&&(r=n.matchers[e]),r||(r=c[e]),r};return{version:r,createHandler:function(r){return n=r,e=s(),function(){console.log(arguments);var n=a(arguments);return n.responder.apply(this,n.args)}}}},sig;sig="undefined"!=typeof exports?exports:{},sig.signature=signature;