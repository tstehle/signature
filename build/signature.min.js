/*! signature 2013-04-16 */
(function(){var n,e=function(){var n=function(n){return n.replace(/(?:(?:^|\n)\s+|\s+(?:$|\n))/g,"").replace(/\s+/g," ")},e=function(n,e){var o,t={};for(o in n)t[o]=r(o,e);return t},r=function(e,r){var t,i,u=e.split(","),s=[],a=!0;for(s.startingNodes=[],i=0;u.length>i;i++)t=n(u[i]),s[i]={},t.length>=3&&"["===t.charAt(0)&&"]"===t.charAt(t.length-1)?(t=t.substring(1,t.length-1),s[i].optional=!0):s[i].optional=!1,s[i].index=i,s[i].matcher=o.findByName(t,r),s[i].linksTo=[],s[i].isStartingNode=a,a&&s.startingNodes.push(s[i]),a&&s[i].optional||(a=!1);for(i=0;s.length-1>i;i++){for(var c=!0,f=i+1;s.length>f;f++)if(s[i].linksTo.push(s[f]),!s[f].optional){c=!1;break}s[i].isEndNode=c}return s[i].isEndNode=!0,console.log("$$$$$ PARSED EXPRESSION $$$$$"),console.log(s),s};return e}(),o=function(){var n=function(n,o){var r;return"object"==typeof o&&(r=o[n]),r||(r=e[n]),r},e={number:function(n){return"number"==typeof n},string:function(n){return"string"==typeof n},any:function(n){return n!==void 0&&null!==n},"function":function(n){return"function"==typeof n}};return e["*"]=e.any,{findByName:n}}(),r=function(){var n,e,o,r,t,i=[],u=function(n){return r[n.index]||(r[n.index]=0),n.matcher(t[e])?(console.log("doParse of node "+n.index+" compared to argument "+t[e]+" --- PASS"),s(n)):(console.log("doParse of node "+n.index+" compared to argument "+t[e]+" --- FAIL"),a(n))},s=function(o){i[o.index]=t[e];var s=r[o.index],a=o.linksTo[s];return e++,n.push(a),o.isEndNode&&e===t.length?i:a?(r[a.index]=0,u(a)):e===t.length?i:!1},a=function(o){n.pop(),i[o.index]=void 0;var t=n[n.length-1];if(console.log("*/*/*/ BACKTRACKING TO PREVIOUS NODE:"),console.log(t),!t)return!1;r[t.index]+=1;var s=t.linksTo[r[t.index]];return s?(r[s.index]=0,n.push(s),console.log("*/*/*/ FINDING NEXT NODE:"),console.log(s),u(s)):(e--,a(t))},c=function(s,a){return o=s,t=a,e=0,n=[o[0]],r=[],i=[],u(o[0])};return c}(),t=function(){},i=function(n,e,o){var r,i,s;for(s in e){if(r=e[s],i=u(n,s,o),"object"==typeof i){console.log(i);break}i=[],r=t}return{responder:r,args:i}},u=function(n,e,o){var t=o[e];return r(t,n)},s=function(n){var o=e(n.responders,n.matchers),r=function(){var e=i(arguments,n.responders,o);return e.responder.apply(this,e.args)};return r},a=this;n="undefined"!=typeof exports?exports:a.signature={},n.createHandler=s})();