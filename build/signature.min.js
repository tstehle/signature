/*! signature 2013-04-16 */
(function(){var n,e=function(){var n=function(n){return n.replace(/(?:(?:^|\n)\s+|\s+(?:$|\n))/g,"").replace(/\s+/g," ")},e=function(n,e){var o,t={};for(o in n)t[o]=r(o,e);return t},r=function(e,r){var t,i,u=e.split(","),s=[],a=!0;for(s.startingNodes=[],i=0;u.length>i;i++)t=n(u[i]),s[i]={},t.length>=3&&"["===t.charAt(0)&&"]"===t.charAt(t.length-1)?(t=t.substring(1,t.length-1),s[i].optional=!0):s[i].optional=!1,s[i].index=i,s[i].matcher=o.findByName(t,r),s[i].linksTo=[],s[i].isStartingNode=a,a&&s.startingNodes.push(s[i]),a&&s[i].optional||(a=!1);for(i=0;s.length-1>i;i++){for(var c=!0,f=i+1;s.length>f;f++)if(s[i].linksTo.push(s[f]),!s[f].optional){c=!1;break}s[i].isEndNode=c}return s[i].isEndNode=!0,console.log("$$$$$ PARSED EXPRESSION $$$$$"),console.log(s),s};return e}(),o=function(){var n=function(n,o){var r;return"object"==typeof o&&(r=o[n]),r||(r=e[n]),r},e={number:function(n){return"number"==typeof n},string:function(n){return"string"==typeof n},any:function(n){return n!==void 0&&null!==n},"function":function(n){return"function"==typeof n}};return e["*"]=e.any,{findByName:n}}(),r=function(){var n,e,o,r,t,i,u,s=[],a=function(n){return r[n.index]||(r[n.index]=0),n.matcher(t[e])?(console.log("doParse of node "+n.index+" compared to argument "+t[e]+" --- PASS"),c(n)):(console.log("doParse of node "+n.index+" compared to argument "+t[e]+" --- FAIL"),f(n))},c=function(o){s[o.index]=t[e];var i=r[o.index],u=o.linksTo[i];return e++,n.push(u),o.isEndNode&&e===t.length?s:u?(r[u.index]=0,a(u)):e===t.length?s:!1},f=function(o){n.pop(),s[o.index]=void 0;var t=n[n.length-1];if(console.log("*/*/*/ BACKTRACKING TO PREVIOUS NODE:"),console.log(t),!t){u++;var c=i[u];return void 0!==c?a(c):!1}r[t.index]+=1;var l=t.linksTo[r[t.index]];return l?(r[l.index]=0,n.push(l),console.log("*/*/*/ FINDING NEXT NODE:"),console.log(l),a(l)):(e--,f(t))},l=function(c,f){return o=c,t=f,e=0,r=[],s=[],i=o.startingNodes,u=0,n=[i[0]],a(i[0])};return l}(),t=function(){},i=function(n,e,o){var r,i,s;for(s in e){if(r=e[s],i=u(n,s,o),"object"==typeof i){console.log(i);break}i=[],r=t}return{responder:r,args:i}},u=function(n,e,o){var t=o[e];return r(t,n)},s=function(n){var o=e(n.responders,n.matchers),r=function(){var e=i(arguments,n.responders,o);return e.responder.apply(this,e.args)};return r},a=this;n="undefined"!=typeof exports?exports:a.signature={},n.createHandler=s})();